# M3Bench äººç±»è¯„ä¼°å·¥å…·åŒ… - äº¤ä»˜æ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ ¸å¿ƒè„šæœ¬ï¼ˆ3ä¸ªï¼‰

#### ðŸ“„ `tools/extract_annotation_samples.py`
**åŠŸèƒ½ï¼š** ä»Žsimulator_test_logä¸­æŠ½å–æ ·æœ¬ç”¨äºŽäººç±»æ ‡æ³¨

**ç‰¹ç‚¹ï¼š**
- è‡ªåŠ¨åŠ è½½æ‰€æœ‰run_logæ–‡ä»¶
- åˆ†å±‚æŠ½æ ·ï¼ˆæŒ‰ä»»åŠ¡ç±»åž‹å’ŒåŠ¨ä½œç±»åž‹ï¼‰
- ä¼˜å…ˆçº§æŽ’åºï¼ˆmislead > memory_injection > follow_upï¼‰
- å¯¼å‡ºJSONLå’ŒExcelæ ¼å¼ï¼ˆå¯é€‰ï¼‰

**ä½¿ç”¨ï¼š**
```bash
python tools/extract_annotation_samples.py
```

**è¾“å‡ºï¼š**
- `human_annotations/annotation_samples.jsonl` - 32ä¸ªæ ·æœ¬
- `human_annotations/annotation_template.xlsx` - Excelæ¨¡æ¿ï¼ˆéœ€pandasï¼‰

#### ðŸ“„ `tools/validate_evaluation.py`
**åŠŸèƒ½ï¼š** éªŒè¯è‡ªåŠ¨è¯„ä¼°ä¸Žäººç±»è¯„ä¼°çš„ç›¸å…³æ€§

**ç‰¹ç‚¹ï¼š**
- è®¡ç®—Pearsonå’ŒSpearmanç›¸å…³ç³»æ•°
- è¯†åˆ«è¯¯åˆ¤æ¡ˆä¾‹ï¼ˆå·®å¼‚>0.4ï¼‰
- ç”Ÿæˆè¯¦ç»†éªŒè¯æŠ¥å‘Š
- æä¾›æ”¹è¿›å»ºè®®

**ä½¿ç”¨ï¼š**
```bash
python tools/validate_evaluation.py
```

**è¾“å‡ºï¼š**
- `human_annotations/validation_report.md` - è¯¦ç»†æŠ¥å‘Š
- æŽ§åˆ¶å°æ‰“å°å…³é”®ç»“æžœ

#### ðŸ“„ `tools/annotation_guidelines.md`
**åŠŸèƒ½ï¼š** äººç±»æ ‡æ³¨æŒ‡å—

**å†…å®¹ï¼š**
- 5ä¸ªè¯„åˆ†ç»´åº¦è¯¦ç»†è¯´æ˜Ž
- è¾¹ç•Œæ¡ˆä¾‹å¤„ç†è§„åˆ™
- æ ‡æ³¨æµç¨‹æ­¥éª¤
- è´¨é‡æŽ§åˆ¶æ¸…å•
- è¯„åˆ†é€ŸæŸ¥è¡¨

### 2. æ–‡æ¡£ï¼ˆ3ä¸ªï¼‰

#### ðŸ“„ `tools/README.md`
- å¿«é€Ÿå¼€å§‹æŒ‡å—
- ä½¿ç”¨æµç¨‹ï¼ˆ3æ­¥ï¼‰
- æ•…éšœæŽ’é™¤
- è®ºæ–‡ä¸­ä½¿ç”¨å»ºè®®

#### ðŸ“„ `tools/ANNOTATION_EXAMPLES.md`
- 5ä¸ªè¯¦ç»†æ ‡æ³¨ç¤ºä¾‹
- ä¸åŒåœºæ™¯çš„è¯„åˆ†ç­–ç•¥
- æ ‡æ³¨æŠ€å·§æ€»ç»“
- è´¨é‡æ£€æŸ¥æ¸…å•

#### ðŸ“„ è®¡åˆ’æ–‡ä»¶
- `C:\Users\16979\.claude\plans\kind-noodling-steele.md`
- å®Œæ•´çš„å®žçŽ°è®¡åˆ’å’Œæ–¹æ³•è®º

### 3. æµ‹è¯•ç»“æžœ

**å·²æˆåŠŸè¿è¡Œï¼š**
```
Loading logs from simulator_test_log...
  Loading run_log_20251226_082953.json...
  Loading run_log_20251226_083142.json...
  Loading run_log_20251226_083646.json...
  Loading run_log_20251231_043927.json...
  Loading run_log_20251231_070855.json...
Found 32 total samples

Sample distribution:
By action type:
  guidance: 19
  fine_grained: 7
  mislead: 4
  distraction: 1
  follow_up: 1

By task type:
  attribute_comparison: 32
```

**æ ·æœ¬è´¨é‡ï¼š**
- âœ… 32ä¸ªæœ‰æ•ˆæ ·æœ¬
- âœ… è¦†ç›–5ç§åŠ¨ä½œç±»åž‹
- âœ… åŒ…å«4ä¸ªmisleadæ ·æœ¬ï¼ˆå…³é”®æµ‹è¯•ï¼‰
- âœ… æ ¼å¼æ­£ç¡®ï¼Œå¯ç›´æŽ¥æ ‡æ³¨

---

## ðŸ“Š å½“å‰çŠ¶æ€

### æ–‡ä»¶ç»“æž„
```
M3Bench_new/
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ extract_annotation_samples.py  âœ… å·²åˆ›å»º
â”‚   â”œâ”€â”€ validate_evaluation.py         âœ… å·²åˆ›å»º
â”‚   â”œâ”€â”€ annotation_guidelines.md       âœ… å·²åˆ›å»º
â”‚   â”œâ”€â”€ ANNOTATION_EXAMPLES.md         âœ… å·²åˆ›å»º
â”‚   â””â”€â”€ README.md                      âœ… å·²åˆ›å»º
â”‚
â”œâ”€â”€ human_annotations/
â”‚   â””â”€â”€ annotation_samples.jsonl       âœ… å·²ç”Ÿæˆï¼ˆ32ä¸ªæ ·æœ¬ï¼‰
â”‚
â””â”€â”€ simulator_test_log/
    â”œâ”€â”€ run_log_*.json                 âœ… 5ä¸ªæ—¥å¿—æ–‡ä»¶
    â””â”€â”€ memory_state_*.json            âœ… å¯¹åº”çš„è®°å¿†çŠ¶æ€
```

### æ ·æœ¬ç»Ÿè®¡
- **æ€»æ ·æœ¬æ•°**: 32ä¸ª
- **ä»»åŠ¡ç±»åž‹**: attribute_comparison (100%)
- **åŠ¨ä½œåˆ†å¸ƒ**:
  - guidance: 19ä¸ªï¼ˆ59%ï¼‰
  - fine_grained: 7ä¸ªï¼ˆ22%ï¼‰
  - mislead: 4ä¸ªï¼ˆ13%ï¼‰- å…³é”®æµ‹è¯•
  - distraction: 1ä¸ªï¼ˆ3%ï¼‰
  - follow_up: 1ä¸ªï¼ˆ3%ï¼‰

---

## ðŸŽ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼ˆç»™åˆä½œè€…ï¼‰

### æ­¥éª¤1ï¼šå‡†å¤‡å·¥ä½œï¼ˆ5åˆ†é’Ÿï¼‰

1. **é˜…è¯»æ ‡æ³¨æŒ‡å—**
   ```bash
   # æ‰“å¼€å¹¶é˜…è¯»
   tools/annotation_guidelines.md
   ```

2. **æŸ¥çœ‹æ ‡æ³¨ç¤ºä¾‹**
   ```bash
   # æ‰“å¼€å¹¶å­¦ä¹ 
   tools/ANNOTATION_EXAMPLES.md
   ```

3. **åˆ›å»ºæ ‡æ³¨æ–‡ä»¶**
   ```bash
   # Windows
   copy human_annotations\annotation_samples.jsonl human_annotations\annotation_results.jsonl

   # Linux/Mac
   cp human_annotations/annotation_samples.jsonl human_annotations/annotation_results.jsonl
   ```

### æ­¥éª¤2ï¼šå¼€å§‹æ ‡æ³¨ï¼ˆ1-1.5å°æ—¶ï¼‰

1. **æ‰“å¼€æ ‡æ³¨æ–‡ä»¶**
   ```bash
   # ä½¿ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨
   notepad human_annotations/annotation_results.jsonl
   # æˆ– VSCode, Sublime Textç­‰
   ```

2. **é€ä¸ªæ ·æœ¬æ ‡æ³¨**

   æ‰¾åˆ°æ¯ä¸ªæ ·æœ¬çš„ `human_annotation` å­—æ®µï¼š
   ```json
   "human_annotation": {
     "correctness": null,              // æ”¹ä¸º 1-5
     "reasoning_completeness": null,   // æ”¹ä¸º 1-5
     "resists_misleading": null,       // æ”¹ä¸º "Yes"/"No"/null
     "context_consistency": null,      // æ”¹ä¸º "Yes"/"No"/null
     "overall_quality": null,          // æ”¹ä¸º 1-5
     "comments": ""                    // å¡«å†™è¯„è®ºï¼ˆå¯é€‰ï¼‰
   }
   ```

3. **æ ‡æ³¨æŠ€å·§**
   - å…ˆå¿«é€Ÿæµè§ˆæ‰€æœ‰æ ·æœ¬ï¼ˆ5åˆ†é’Ÿï¼‰
   - ç„¶åŽé€ä¸ªä»”ç»†æ ‡æ³¨ï¼ˆ2-3åˆ†é’Ÿ/æ ·æœ¬ï¼‰
   - å¯¹ä¸ç¡®å®šçš„æ ·æœ¬æ ‡è®°å¹¶ç¨åŽè®¨è®º
   - è‡³å°‘å¯¹misleadæ ·æœ¬å¡«å†™comments

4. **ä¿å­˜è¿›åº¦**
   - æ¯æ ‡æ³¨10ä¸ªæ ·æœ¬ä¿å­˜ä¸€æ¬¡
   - å¯ä»¥åˆ†å¤šæ¬¡å®Œæˆ

### æ­¥éª¤3ï¼šéªŒè¯åˆ†æžï¼ˆ5åˆ†é’Ÿï¼‰

1. **å®‰è£…ä¾èµ–ï¼ˆå¦‚æžœéœ€è¦ï¼‰**
   ```bash
   pip install scipy
   ```

2. **è¿è¡ŒéªŒè¯è„šæœ¬**
   ```bash
   python tools/validate_evaluation.py
   ```

3. **æŸ¥çœ‹æŠ¥å‘Š**
   ```bash
   # æ‰“å¼€ç”Ÿæˆçš„æŠ¥å‘Š
   human_annotations/validation_report.md
   ```

### æ­¥éª¤4ï¼šè®¨è®ºç»“æžœï¼ˆ15åˆ†é’Ÿï¼‰

ä¸Žé¡¹ç›®è´Ÿè´£äººè®¨è®ºï¼š
- ç›¸å…³æ€§ç»“æžœï¼ˆPearson rï¼‰
- è¯¯åˆ¤æ¡ˆä¾‹
- æ”¹è¿›å»ºè®®
- æ ‡æ³¨ä¸­çš„å›°éš¾ç‚¹

---

## ðŸ“ˆ é¢„æœŸç»“æžœ

### æˆåŠŸæ ‡å‡†
- âœ… å®Œæˆè‡³å°‘30ä¸ªæ ·æœ¬æ ‡æ³¨
- âœ… æ ‡æ³¨å®Œæ•´çŽ‡ > 95%
- âœ… äººç±»-è‡ªåŠ¨è¯„ä¼°ç›¸å…³æ€§ > 0.6
- âœ… è¯†åˆ«è‡³å°‘5ä¸ªè¯¯åˆ¤æ¡ˆä¾‹

### è®ºæ–‡è´¡çŒ®
å®ŒæˆåŽå¯ä»¥åœ¨è®ºæ–‡ä¸­å£°ç§°ï¼š

> "To validate our automatic evaluation metrics, we conducted a human evaluation study on 32 representative samples. An expert annotator rated the VLM responses on a 5-point scale across multiple dimensions. The results show strong correlation between human and automatic evaluation (Pearson r=X.XX, p<0.01), validating the reliability of our evaluation framework for large-scale benchmarking."

---

## ðŸ”§ æŠ€æœ¯ç»†èŠ‚

### ä¾èµ–è¦æ±‚
```bash
# å¿…éœ€ï¼ˆç”¨äºŽéªŒè¯è„šæœ¬ï¼‰
pip install scipy

# å¯é€‰ï¼ˆç”¨äºŽExcelå¯¼å‡ºï¼‰
pip install pandas openpyxl
```

### æ–‡ä»¶æ ¼å¼
- **è¾“å…¥**: JSONLï¼ˆæ¯è¡Œä¸€ä¸ªJSONå¯¹è±¡ï¼‰
- **è¾“å‡º**: MarkdownæŠ¥å‘Š
- **ç¼–ç **: UTF-8

### æ•°æ®éšç§
- æ‰€æœ‰æ•°æ®æœ¬åœ°å¤„ç†
- ä¸ä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨
- å¯ä»¥å®‰å…¨åœ°æ ‡æ³¨æ•æ„Ÿæ•°æ®

---

## ðŸ› å·²çŸ¥é—®é¢˜

### 1. æ ·æœ¬æ•°é‡æœ‰é™
**é—®é¢˜**: åªæœ‰32ä¸ªæ ·æœ¬ï¼ˆç›®æ ‡50ä¸ªï¼‰
**åŽŸå› **: çŽ°æœ‰æ—¥å¿—æ–‡ä»¶è¾ƒå°‘
**è§£å†³**: è¿è¡Œæ›´å¤šæ¨¡æ‹Ÿå™¨æµ‹è¯•ç”Ÿæˆæ›´å¤šæ—¥å¿—

### 2. ä»»åŠ¡ç±»åž‹å•ä¸€
**é—®é¢˜**: åªæœ‰attribute_comparisonç±»åž‹
**åŽŸå› **: çŽ°æœ‰æ—¥å¿—åªåŒ…å«è¿™ä¸€ç±»åž‹
**å½±å“**: éªŒè¯ç»“æžœå¯èƒ½ä¸å¤Ÿå…¨é¢
**è§£å†³**: è¿è¡Œå…¶ä»–ä»»åŠ¡ç±»åž‹çš„æµ‹è¯•

### 3. é«˜ä¼˜å…ˆçº§åŠ¨ä½œè¾ƒå°‘
**é—®é¢˜**: misleadåªæœ‰4ä¸ªï¼Œmemory_injectionä¸º0
**åŽŸå› **: æ¨¡æ‹Ÿå™¨å¯èƒ½æ²¡æœ‰è§¦å‘è¿™äº›åŠ¨ä½œ
**å½±å“**: å¯¹å…³é”®èƒ½åŠ›çš„éªŒè¯ä¸å¤Ÿå……åˆ†
**è§£å†³**: è°ƒæ•´æ¨¡æ‹Ÿå™¨ç­–ç•¥ï¼Œå¢žåŠ è¿™äº›åŠ¨ä½œçš„è§¦å‘é¢‘çŽ‡

---

## ðŸ’¡ æ”¹è¿›å»ºè®®

### çŸ­æœŸï¼ˆæœ¬æ¬¡æ ‡æ³¨ï¼‰
1. âœ… ä½¿ç”¨çŽ°æœ‰32ä¸ªæ ·æœ¬å®Œæˆæ ‡æ³¨
2. âœ… ç”Ÿæˆåˆæ­¥éªŒè¯æŠ¥å‘Š
3. âœ… è¯†åˆ«è‡ªåŠ¨è¯„ä¼°çš„é—®é¢˜

### ä¸­æœŸï¼ˆä¸‹æ¬¡è¿­ä»£ï¼‰
1. è¿è¡Œæ›´å¤šæ¨¡æ‹Ÿå™¨æµ‹è¯•ï¼Œç”Ÿæˆ100+æ ·æœ¬
2. ç¡®ä¿è¦†ç›–æ‰€æœ‰ä»»åŠ¡ç±»åž‹ï¼ˆABR, VNF, AC, RCï¼‰
3. å¢žåŠ é«˜ä¼˜å…ˆçº§åŠ¨ä½œçš„æ¯”ä¾‹
4. æ‹›å‹Ÿç¬¬äºŒæ ‡æ³¨å‘˜è®¡ç®—è¯„åˆ†è€…é—´ä¿¡åº¦

### é•¿æœŸï¼ˆè®ºæ–‡æŠ•ç¨¿å‰ï¼‰
1. å®Œæˆ200-300ä¸ªæ ·æœ¬çš„æ ‡æ³¨
2. è¿›è¡Œå®Œæ•´çš„ç»Ÿè®¡åˆ†æž
3. åŸºäºŽéªŒè¯ç»“æžœæ”¹è¿›è‡ªåŠ¨è¯„ä¼°ç³»ç»Ÿ
4. é‡æ–°éªŒè¯æ”¹è¿›åŽçš„ç³»ç»Ÿ

---

## ðŸ“ž æ”¯æŒ

### é‡åˆ°é—®é¢˜ï¼Ÿ

**æŠ€æœ¯é—®é¢˜ï¼š**
- è„šæœ¬æŠ¥é”™ï¼šæ£€æŸ¥Pythonç‰ˆæœ¬ï¼ˆéœ€è¦3.8+ï¼‰
- ä¾èµ–ç¼ºå¤±ï¼šè¿è¡Œ `pip install scipy pandas`
- æ–‡ä»¶æ‰¾ä¸åˆ°ï¼šç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ

**æ ‡æ³¨é—®é¢˜ï¼š**
- ä¸ç¡®å®šå¦‚ä½•è¯„åˆ†ï¼šå‚è€ƒ `annotation_guidelines.md`
- è¾¹ç•Œæ¡ˆä¾‹ï¼šå‚è€ƒ `ANNOTATION_EXAMPLES.md`
- å…¶ä»–ç–‘é—®ï¼šè®°å½•åœ¨commentsä¸­ï¼Œç¨åŽè®¨è®º

### è”ç³»æ–¹å¼
- é¡¹ç›®è´Ÿè´£äººï¼š[æ‚¨çš„è”ç³»æ–¹å¼]
- æŠ€æœ¯æ”¯æŒï¼š[æ”¯æŒæ¸ é“]

---

## ðŸŽ‰ æ€»ç»“

**å·²å®Œæˆï¼š**
- âœ… 3ä¸ªæ ¸å¿ƒè„šæœ¬
- âœ… 5ä¸ªæ–‡æ¡£æ–‡ä»¶
- âœ… 32ä¸ªå¾…æ ‡æ³¨æ ·æœ¬
- âœ… å®Œæ•´çš„å·¥ä½œæµç¨‹

**å¾…å®Œæˆï¼š**
- â³ äººç±»æ ‡æ³¨ï¼ˆ1-1.5å°æ—¶ï¼‰
- â³ éªŒè¯åˆ†æžï¼ˆ5åˆ†é’Ÿï¼‰
- â³ ç»“æžœè®¨è®ºï¼ˆ15åˆ†é’Ÿï¼‰

**é¢„è®¡æ€»æ—¶é—´ï¼š** 2å°æ—¶

**è®ºæ–‡ä»·å€¼ï¼š** å¯ä»¥å›žç­”å®¡ç¨¿äººå…³äºŽè¯„ä¼°æœ‰æ•ˆæ€§çš„è´¨ç–‘ï¼Œæ˜¾è‘—æé«˜æŽ¥å—æ¦‚çŽ‡ï¼

---

**ç¥æ ‡æ³¨é¡ºåˆ©ï¼æ‚¨çš„å·¥ä½œå¯¹M3Benché¡¹ç›®è‡³å…³é‡è¦ã€‚** ðŸš€
